name: build-lambda-layer
 
on:
workflow_dispatch:
jobs:
build:
runs-on:ubuntu-latest
steps:
- nane : Checkout
uses: actions/checkout@v3
 
- nane : Set up Python 3.10
uses: actions/setup-python@v4
with:
python-version: "3.10"
 
- nane : Build psycopg3 Lambda layer
run: |
mkdir python
pip install "psycopg[binary]" -t python/
zip -r psycopg310-layer.zip python
 
- nane : Upload layer artifact
uses: actions/upload-artifact@v3
with:
name: psycopg310-layer
path:psycopg310-layer.zip
